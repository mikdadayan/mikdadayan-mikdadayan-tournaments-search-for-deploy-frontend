(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(7),o=n.n(s),i=(n(23),n(4)),l=n.n(i),u=n(6),d=n(11),j=n(3),f=n(2),m={GET_ALL_TOURNAMENTS:"GET_ALL_TOURNAMENTS",TOURNAMENT_ERROR:"TOURNAMENT_ERROR",TOURNAMENTS_ERROR:"TOURNAMENTS_ERROR",GET_FAVORITES:"GET_FAVORITES",GET_FAVORITES_ERROR:"GET_FAVORITES_ERROR",ADD_FAVORITE:"ADD_FAVORITE",ADD_FAVORITE_ERROR:"ADD_FAVORITE_ERROR",DELETE_FAVORITE:"DELETE_FAVORITE"},h=m.GET_ALL_TOURNAMENTS,O=m.TOURNAMENTS_ERROR,b=m.GET_FAVORITES,v=m.GET_FAVORITES_ERROR,p=m.ADD_FAVORITE,x=m.ADD_FAVORITE_ERROR,g=m.DELETE_FAVORITE;var E=Object(j.b)((function(e){return{tournaments:e.tournaments.tournaments,requestController:e.tournaments.requestController}}),{getTournaments:function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.length<=2?r({type:O}):e.length>2&&(a={signal:t},fetch("https://api-search.win.gg/search?q=".concat(e,"&index=tournament"),a).then((function(e){return e.json()})).then((function(e){return r({type:h,payload:{tournaments:e[0].documents.slice(0,10)}})})).catch((function(e){console.warn("Fetch 1 error: ".concat(e.message))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.handleSubmit,n=e.getTournaments,c=Object(a.useState)(""),s=Object(d.a)(c,2),o=s[0],i=s[1],l=Object(a.useState)(null),u=Object(d.a)(l,2),j=u[0],f=u[1];return Object(a.useEffect)((function(){j&&j.abort();var e=new AbortController,t=e.signal;n(o,t),f(e)}),[o]),console.log("SearchBox"),Object(r.jsx)(a.Fragment,{children:Object(r.jsx)("form",{onSubmit:t,className:"col item-form ",action:"",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"input-field col s12",children:Object(r.jsx)("input",{type:"text",placeholder:"Search Tourament",name:"search",onChange:function(e){i(e.target.value)},value:o,autoFocus:!0})})})})})}));n(32);var R=Object(j.b)(null,{addFavorite:function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(r){var a,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://peaceful-thicket-48357.herokuapp.com/api/tournaments/favorites",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(f.a)(Object(f.a)({},e),{},{user_id:t}))});case 3:if(409!==(a=n.sent).status){n.next=6;break}throw new Error("You already added this tournament in favorites.");case 6:return n.next=8,a.json();case 8:if(c=n.sent,localStorage.setItem("user_id",c.tournament.user_id),500!==a.status&&401!==a.status){n.next=13;break}throw r({type:x}),new Error(c.msg);case 13:r({type:p,payload:{favorite:c.tournament}}),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0.message);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.addFavorite,n=e.tournament,a=n.id,c=n.images,s=n.title,o=n.description;return Object(r.jsxs)("li",{title:"Click to add favorites",className:"collection-item avatar tournament-item",onClick:function(){var e=localStorage.getItem("user_id"),n={tournament_id:a,title:s,image:c?c.default.filePath:"/",description:o};t(n,e)},children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col s3",children:c?Object(r.jsx)("img",{alt:"",className:"circle",src:"https://cdn-images.win.gg/".concat(c.default.filePath)}):null}),Object(r.jsx)("div",{className:"col s9",children:Object(r.jsx)("p",{className:"title flow-text",children:Object(r.jsx)("b",{children:s})})})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col s12",children:Object(r.jsx)("p",{children:o})})})]})}));var T=Object(j.b)((function(e){return{tournaments:e.tournaments.tournaments}}))((function(e){var t=e.tournaments.map((function(e){return Object(r.jsx)(R,{tournament:e},e.id)}));return Object(r.jsx)(a.Fragment,{children:t.length>0?Object(r.jsx)("ul",{className:"collection",children:t}):null})})),N=n(15),w=n.n(N),_=c.a.memo((function(){return Object(r.jsx)("div",{children:Object(r.jsx)("a",{href:"#",className:"small brand-logo left",onClick:function(e){return e.preventDefault()},children:"Tournaments"})})})),A=c.a.memo((function(){return Object(a.useEffect)((function(){var e=document.querySelectorAll(".modal");w.a.Modal.init(e,{})}),[]),Object(r.jsx)("nav",{children:Object(r.jsxs)("div",{className:"nav-wrapper",children:[Object(r.jsx)(_,{}),Object(r.jsx)("ul",{className:"right",children:Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#modal1",className:"waves-effect waves-light btn red lighten-3 modal-trigger",onClick:function(e){return e.preventDefault()},children:Object(r.jsx)("i",{className:"medium material-icons",children:"favorite_border"})})})})]})})}));n(33);var F=Object(j.b)(null,{deleteFavorite:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("https://peaceful-thicket-48357.herokuapp.com/api/tournaments/favorites/".concat(e),{method:"delete"}).then((function(e){return e.json()})).then((function(e){return n({type:g,payload:{deletedFavorite:e.deletedFavorite}})})).catch((function(e){console.warn("Fetch 1 error: ".concat(e.message))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.deleteFavorite,n=e.tournament,a=n._id,c=n.image,s=n.title,o=n.description;return Object(r.jsx)("li",{className:"collection-item avatar",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"col s11",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col s3",children:"/"!==c?Object(r.jsx)("img",{alt:"",className:"circle",src:"https://cdn-images.win.gg/".concat(c)}):null}),Object(r.jsx)("div",{className:"col s9",children:Object(r.jsx)("p",{className:"title flow-text",children:Object(r.jsx)("b",{children:s})})})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("p",{children:o})})]}),Object(r.jsx)("div",{className:"col s1",children:Object(r.jsx)("a",{className:"btn-floating btn-small waves-effect waves-light red",onClick:function(e){e.preventDefault(),t(a)},title:"Delete",children:Object(r.jsx)("i",{className:"tiny material-icons",children:"clear"})})})]})})}));var S=Object(j.b)((function(e){return{favorites:e.tournaments.favorites}}))((function(e){var t;return t=e.favorites.map((function(e){return Object(r.jsx)(F,{tournament:e},e._id)})),Object(r.jsxs)("div",{id:"modal1",className:"modal",children:[Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsx)("h4",{children:"Favorites"}),t.length>0?Object(r.jsx)("ul",{className:"collection",children:t}):Object(r.jsx)("div",{children:Object(r.jsx)("h6",{children:"You have not favorite Tournaments"})})]}),Object(r.jsx)("div",{className:"modal-footer",children:Object(r.jsx)("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat",children:"CLOSE"})})]})}));n(34);var k=Object(j.b)((function(e){return{tournaments:e.tournaments.tournaments}}),{getFavoriteTournaments:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://peaceful-thicket-48357.herokuapp.com/api/tournaments",{method:"get",headers:new Headers({"x-auth-token":e})});case 3:return r=t.sent,t.next=6,r.json();case 6:if(a=t.sent,500!==r.status&&401!==r.status){t.next=10;break}throw n({type:v}),new Error(a.msg);case 10:n({type:b,payload:{favorites:a.tournaments}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getFavoriteTournaments;return Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem("user_id"),t(n);case 2:case"end":return e.stop()}}),e)}))),[]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(A,{}),Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("div",{className:"card",children:Object(r.jsx)("div",{className:"card-content",children:Object(r.jsx)(E,{handleSubmit:function(e){e.preventDefault()}})})}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)(S,{}),Object(r.jsx)("div",{className:"col s12",children:Object(r.jsx)(T,{})})]})]})]})})),y=n(5),D=n(16),I=n(17),V=m.GET_ALL_TOURNAMENTS,C=m.TOURNAMENTS_ERROR,L=m.GET_FAVORITES,M=m.GET_FAVORITES_ERROR,G=m.ADD_FAVORITE,U=m.DELETE_FAVORITE,q={tournament:null,tournaments:[],favorites:[],error:{}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case V:return Object(f.a)(Object(f.a)({},e),{},{requestController:r.requestController,tournaments:r.tournaments});case C:return Object(f.a)(Object(f.a)({},e),{},{tournaments:[]});case L:return Object(f.a)(Object(f.a)({},e),{},{favorites:r.favorites});case M:return Object(f.a)(Object(f.a)({},e),{},{favorites:[]});case G:return Object(f.a)(Object(f.a)({},e),{},{favorites:e.favorites.concat(r.favorite)});case U:return Object(f.a)(Object(f.a)({},e),{},{favorites:e.favorites.filter((function(e){return e._id!==r.deletedFavorite._id}))});default:return e}},B=Object(y.combineReducers)({tournaments:W}),P=[I.a],J=Object(y.createStore)(B,{},Object(D.composeWithDevTools)(y.applyMiddleware.apply(void 0,P))),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var $=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};o.a.render(Object(r.jsx)(j.a,{store:J,children:Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(k,{})})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Y?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):H(e)}))}}(),$()}},[[35,1,2]]]);
//# sourceMappingURL=main.2de8d5cf.chunk.js.map